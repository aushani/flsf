Based off of https://github.com/aushani/tsf
